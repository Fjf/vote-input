<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Input Overlay</title>

    <style>
        html, body {
            width: 100vw;
            height: 100vh;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            background: transparent;
            color: white;
            font-family: monospace;
            overflow: hidden;
        }

        .drag-region {
            -webkit-app-region: drag;
            width: 100%;
            height: 100%;
        }

        button, input, canvas {
            -webkit-app-region: no-drag;
        }

        body {
            pointer-events: auto;
        }

        #panel {
            background: rgba(0, 0, 0, 0.4);
            padding: 12px;
            border-radius: 8px;
            width: fit-content;
        }
    </style>

    <script type="module" src="js/main.js"></script>
    <script type="module" src="js/listen.js"></script>
</head>
<body>
<div class="drag-region" id="panel">
    <div style="display:flex;gap:8px;align-items:center">
        <label for="server-ip">Server IP:</label>
        <input
                id="server-ip"
                type="text"
                placeholder="127.0.0.1"
                style="width:140px"
        />
        <button id="connect-button">Connect</button>
    </div>

    <h1>Listening to your input...</h1>

    <div style="display:flex;gap:8px">
        <div>Input:</div>
        <div id="current-tracking">NONE</div>
    </div>

    <button id="tracking-mouse-button">
        Start Tracking Mouse (ESC to release)
    </button>

    <div id="output">Connecting...</div>
    <button id="close-button">Close Window</button>
    <a href="/download">
        <button>Download Windows Installer</button>
    </a>
</div>
<script>
    // Load saved server IP on page load
    document.addEventListener('DOMContentLoaded', () => {
        const ipInput = document.getElementById('server-ip');
        const savedIp = localStorage.getItem('serverIp');
        if (savedIp) {
            ipInput.value = savedIp;
        }
    });

    // Save server IP when the Connect button is clicked
    document.getElementById('connect-button').addEventListener('click', () => {
        const ip = document.getElementById('server-ip').value.trim();
        if (ip) {
            localStorage.setItem('serverIp', ip);
        }
        // Existing connect logic (if any) can follow here
    });

    document.getElementById('close-button').addEventListener('click', () => {
        window.close();
    });
</script>
</body>
</html>
